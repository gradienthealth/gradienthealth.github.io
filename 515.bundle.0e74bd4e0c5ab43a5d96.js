"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[515],{95515:(e,t,o)=>{o.r(t),o.d(t,{default:()=>h});var n=o(43001),a=o(3827),r=o.n(a),i=o(71771),s=o(17816),c=o.n(s),l=o(44379),d=o.n(l),p=o(95303),m=o(69190);const{formatDate:u}=i.utils;function w(e){const{children:t,displaySets:o,viewportId:a,viewportLabel:r,servicesManager:s,extensionManager:l,commandsManager:w,viewportOptions:h}=e,{t:b}=(0,m.$G)("GradientCornerstoneViewport"),{measurementService:g,cornerstoneViewportService:S,userAuthenticationService:f,UINotificationService:I}=s.services,y=o[0],[D]=(0,p.en)(),{Modality:v,SeriesDate:C,SeriesDescription:k,SeriesInstanceUID:U,SeriesNumber:E}=y,{PatientID:x,PatientName:N,PatientSex:P,PatientAge:$,SliceThickness:M,SpacingBetweenSlices:O,ManufacturerModelName:R}=y.images[0],A=()=>{I.show({title:"Download",message:`Downloading ${y.SeriesInstanceUID}...`,type:"warn"});(async function(e){try{const t=await Promise.all(e.map((async e=>{const t=await fetch(e,{headers:f.getAuthorizationHeader()});if(t.ok){const o=await t.blob();return{filename:y.SeriesInstanceUID+e.split(`${y.SeriesInstanceUID}`).slice(-1),blob:o}}throw new Error(`Error downloading file: ${e}`)}))),o=new(c());t.forEach((e=>o.file(e.filename,e.blob)));const n=await o.generateAsync({type:"blob"}),a=URL.createObjectURL(n),r=document.createElement("a");r.href=a,r.download=`${y.SeriesInstanceUID}.zip`,r.click(),URL.revokeObjectURL(a)}catch(e){console.error("Error downloading files:",e)}})(d().uniq(y.instances.map((e=>e.url.split("dicomweb:")[1])))).then((()=>{I.show({title:"Download",message:`Downloaded ${y.SeriesInstanceUID}`,type:"success"})})).catch((e=>{I.show({title:"Download",message:`Could not downlad ${y.SeriesInstanceUID}`,type:"error"})}))},j="cursor-pointer shrink-0 mr-2 text-white hover:text-primary-light";return n.createElement(n.Fragment,null,n.createElement(p.uY,{onDoubleClick:e=>{e.stopPropagation(),e.preventDefault()},onArrowsClick:e=>{"down"===e&&A()},getStatusComponent:()=>console.log("status"),studyData:{label:r,studyDate:u(C),currentSeries:E,seriesDescription:k,patientInformation:{patientName:N?i.default.utils.formatPN(N):"",patientSex:P||"",patientAge:$||"",MRN:x||"",thickness:M?`${parseFloat(M).toFixed(2)}mm`:"",spacing:void 0!==O?`${parseFloat(O).toFixed(2)}mm`:"",scanner:R||""}}},n.createElement(p.JO,{className:`${j}`,name:"arrow-down",onClick:A}),n.createElement(p.JO,{className:`${j}`,style:{height:"16px"},name:"clipboard",onClick:()=>{navigator.clipboard.writeText(y.SeriesInstanceUID).then((()=>{I.show({title:"Copy to Clipboard",message:"Copied SeriesInstanceUID to Clipboard",type:"success"})})).catch((e=>{console.error(e),I.show({title:"Copy to Clipboard",message:"Could not copy SeriesInstanceUID to Clipboard",type:"error"})}))}})),n.createElement("div",{className:"relative flex flex-row w-full h-full overflow-hidden"},(()=>{const{component:t}=l.getModuleEntry("@ohif/extension-cornerstone.viewportModule.cornerstone");return n.createElement(t,e)})(),n.createElement("div",{className:"absolute w-full"},D.viewportId===a&&n.createElement(p.P_,{id:D.id,message:D.message,type:D.type,actions:D.actions,onSubmit:D.onSubmit,onOutsideClick:D.onOutsideClick}))))}w.propTypes={displaySets:r().arrayOf(r().object.isRequired).isRequired,viewportId:r().number.isRequired,dataSource:r().object,children:r().node,customProps:r().object},w.defaultProps={customProps:{}};const h=w}}]);
//# sourceMappingURL=515.bundle.0e74bd4e0c5ab43a5d96.js.map