"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[515],{95515:(e,t,n)=>{n.r(t),n.d(t,{default:()=>h});var o=n(43001),r=n(3827),a=n.n(r),s=n(78695),i=n(17816),c=n.n(i),l=n(44379),d=n.n(l),p=n(98466),m=n(69190);const{formatDate:u}=s.utils;function w(e){const{children:t,displaySets:n,viewportId:r,viewportLabel:a,servicesManager:i,extensionManager:l,commandsManager:w,viewportOptions:h}=e,{t:b}=(0,m.$G)("GradientCornerstoneViewport"),{measurementService:f,cornerstoneViewportService:S,userAuthenticationService:g,UINotificationService:I}=i.services,y=n[0],[D]=(0,p.en)(),{Modality:v,SeriesDate:C,SeriesDescription:k,SeriesInstanceUID:U,SeriesNumber:E}=y,{PatientID:x,PatientName:N,PatientSex:P,PatientAge:$,SliceThickness:M,SpacingBetweenSlices:O,ManufacturerModelName:R}=y.images[0],A=()=>{I.show({title:"Download",message:`Downloading ${y.SeriesInstanceUID}...`,type:"warn"});(async function(e){try{const t=await Promise.all(e.map((async e=>{const t=await fetch(e,{headers:g.getAuthorizationHeader()});if(t.ok){const n=await t.blob();return{filename:y.SeriesInstanceUID+e.split(`${y.SeriesInstanceUID}`).slice(-1),blob:n}}throw new Error(`Error downloading file: ${e}`)}))),n=new(c());t.forEach((e=>n.file(e.filename,e.blob)));const o=await n.generateAsync({type:"blob"}),r=URL.createObjectURL(o),a=document.createElement("a");a.href=r,a.download=`${y.SeriesInstanceUID}.zip`,a.click(),URL.revokeObjectURL(r)}catch(e){console.error("Error downloading files:",e)}})(d().uniq(y.instances.map((e=>e.url.split("dicomweb:")[1])))).then((()=>{I.show({title:"Download",message:`Downloaded ${y.SeriesInstanceUID}`,type:"success"})})).catch((e=>{I.show({title:"Download",message:`Could not downlad ${y.SeriesInstanceUID}`,type:"error"})}))},j="cursor-pointer shrink-0 mr-2 text-white hover:text-primary-light";return o.createElement(o.Fragment,null,o.createElement(p.uY,{onDoubleClick:e=>{e.stopPropagation(),e.preventDefault()},onArrowsClick:e=>{"down"===e&&A()},getStatusComponent:()=>console.log("status"),studyData:{label:a,studyDate:u(C),currentSeries:E,seriesDescription:k,patientInformation:{patientName:N?s.default.utils.formatPN(N):"",patientSex:P||"",patientAge:$||"",MRN:x||"",thickness:M?`${parseFloat(M).toFixed(2)}mm`:"",spacing:void 0!==O?`${parseFloat(O).toFixed(2)}mm`:"",scanner:R||""}}},o.createElement(p.JO,{className:`${j}`,name:"arrow-down",onClick:A}),o.createElement(p.JO,{className:`${j}`,style:{height:"16px"},name:"clipboard",onClick:()=>{navigator.clipboard.writeText(y.SeriesInstanceUID).then((()=>{I.show({title:"Copy to Clipboard",message:"Copied SeriesInstanceUID to Clipboard",type:"success"})})).catch((e=>{console.error(e),I.show({title:"Copy to Clipboard",message:"Could not copy SeriesInstanceUID to Clipboard",type:"error"})}))}})),o.createElement("div",{className:"relative flex flex-row w-full h-full overflow-hidden"},(()=>{const{component:t}=l.getModuleEntry("@ohif/extension-cornerstone.viewportModule.cornerstone");return o.createElement(t,e)})(),o.createElement("div",{className:"absolute w-full"},D.viewportId===r&&o.createElement(p.P_,{id:D.id,message:D.message,type:D.type,actions:D.actions,onSubmit:D.onSubmit,onOutsideClick:D.onOutsideClick}))))}w.propTypes={displaySets:a().arrayOf(a().object.isRequired).isRequired,viewportId:a().number.isRequired,dataSource:a().object,children:a().node,customProps:a().object},w.defaultProps={customProps:{}};const h=w}}]);
//# sourceMappingURL=515.bundle.b8a29f79473a3f12682e.js.map